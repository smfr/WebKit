<!DOCTYPE html>
<style>
body {
  font-size: 20px;
  font-family: Ahem;
}

.margin { 
  width: 50px;
  height: 50px;
  margin-bottom: 100px;
  background-color: green;
}

.sibling { 
  width: 50px;
  height: 50px;
  margin-top: 50px;
  background-color: green;
}
</style>
<div>
  <span>
    <div class=margin></div>
    <!-- ideally we would be testing the br's position but it is broken even with this fix -->
    <span id=test_this></span>
    <br>
  </span>
</div>
<div class=sibling></div>
<pre id=result></pre>
<script>
result.innerText = "offsetTop: " + test_this.offsetTop;
</script>