<html>
<head>
    <style>
        .box {
            writing-mode:vertical-rl;
            width: 100px;
            height: 100px;
            margin: 100px;
            background-color: silver;
        }
        
        body.changed .box {
            filter: drop-shadow(-20px 20px 10px black);
        }
    </style>
    <script src="../../resources/js-test.js"></script>
    <script src="../../resources/ui-helper.js"></script>
    <script>
        jsTestIsAsync = true;

        var layerTreeAsText;
        window.addEventListener('load', async () => {
            description("Test repaint rects when the drop-shadow filter property changes");
            await UIHelper.renderingUpdate();
            
            if (window.internals)
                internals.startTrackingRepaints();
        
            document.body.classList.add('changed');

            if (window.internals) {
                debug(window.internals.repaintRectsAsText());
                internals.stopTrackingRepaints();
            }

            finishJSTest();
        }, false);
    </script>
</head>
<body>
    <div class="box"></div>
    <div id="console"></div>
</html>
