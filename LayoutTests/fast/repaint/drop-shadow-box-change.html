<html>
<head>
    <style>
        .box {
            position: absolute;
            top: 200px;
            left: 200px;
            width: 100px;
            height: 100px;
            background-color: silver;
            filter: drop-shadow(20px 20px 10px black);
        }
        
        body.changed .box {
            width: 150px;
        }
    </style>
    <script src="../../resources/js-test.js"></script>
    <script src="../../resources/ui-helper.js"></script>
    <script>
        jsTestIsAsync = true;

        var layerTreeAsText;
        window.addEventListener('load', async () => {
            description("Test repaint rects when a box with drop-shadow changes size");
            await UIHelper.renderingUpdate();

            if (window.internals)
                internals.startTrackingRepaints();
        
            document.body.classList.add('changed');

            if (window.internals) {
                debug(window.internals.repaintRectsAsText());
                internals.stopTrackingRepaints();
            }

            finishJSTest();
        }, false);
    </script>
</head>
<body>
    <div class="box"></div>
    <div id="console"></div>
</html>
